# 中考词汇扫描助手 - 项目架构图

## 应用整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                    中考词汇扫描助手                           │
├─────────────────────────────────────────────────────────────┤
│  UI层 (Activities & Fragments)                             │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐  │
│  │   主界面    │   扫描界面   │  识别结果   │  生词详情   │  │
│  │ MainActivity│ ScanActivity│ResultActivity│WordDetailAct│  │
│  └─────────────┴─────────────┴─────────────┴─────────────┘  │
│  ┌─────────────┬─────────────┐                            │
│  │   生词本    │   设置界面   │                            │
│  │VocabularyAct│SettingsAct  │                            │
│  └─────────────┴─────────────┘                            │
├─────────────────────────────────────────────────────────────┤
│  业务逻辑层 (ViewModels & Services)                        │
│  ┌─────────────┬─────────────┬─────────────┐              │
│  │  OCR服务    │  词典服务   │  数据管理   │              │
│  │  OCRService │DictService  │DataManager  │              │
│  └─────────────┴─────────────┴─────────────┘              │
├─────────────────────────────────────────────────────────────┤
│  数据层 (Database & Network)                               │
│  ┌─────────────┬─────────────┬─────────────┐              │
│  │   Room数据库│   网络API   │   本地缓存   │              │
│  │   Vocabulary│  百度词典   │   SharedPref│              │
│  │   数据库    │  有道词典   │             │              │
│  └─────────────┴─────────────┴─────────────┘              │
└─────────────────────────────────────────────────────────────┘
```

## 页面导航流程

```
主界面 (MainActivity)
    ├── 扫描阅读 → 扫描界面 (ScanActivity)
    │                    ↓
    │              识别结果 (ResultActivity)
    │                    ↓
    │              生词详情 (WordDetailActivity)
    │                    ↓
    │              返回识别结果
    ├── 我的生词本 → 生词本 (VocabularyActivity)
    │                    ↓
    │              生词详情 (WordDetailActivity)
    ├── 词库查询 → 生词本 (VocabularyActivity)
    └── 设置 → 设置界面 (SettingsActivity)
```

## 核心功能模块

### 1. 扫描模块
```
相机预览 → OCR识别 → 文本处理 → 生词标记
    ↓
Google ML Kit → 正则匹配 → 词汇库对比 → 红色下划线标记
```

### 2. 词典查询模块
```
生词点击 → API请求 → 数据解析 → 界面展示
    ↓
百度词典/有道词典 → JSON解析 → 音标+释义+例句 → 详情页面
```

### 3. 生词本管理模块
```
添加生词 → 本地存储 → 列表展示 → 批量操作
    ↓
Room数据库 → SQLite → RecyclerView → 删除/排序
```

### 4. 设置模块
```
配置选项 → 本地存储 → 全局应用 → 界面更新
    ↓
SharedPreferences → 缓存清理 → 主题切换 → 字体调整
```

## 技术栈详情

### 前端技术
- **Kotlin**: 主要开发语言
- **ViewBinding**: 视图绑定
- **Material Design 3**: UI设计规范
- **RecyclerView**: 列表展示
- **CameraX**: 相机功能

### 后端技术
- **Google ML Kit**: OCR文本识别
- **Retrofit2**: 网络请求
- **Room**: 本地数据库
- **Glide**: 图片加载
- **SharedPreferences**: 配置存储

### 第三方服务
- **百度词典API**: 词典查询
- **网易有道词典API**: 备用词典
- **Google Play Services**: 应用更新

## 数据流图

```
用户操作 → UI事件 → ViewModel → Repository → DataSource
    ↓
界面更新 ← LiveData ← 数据处理 ← API响应 ← 网络请求
```

## 权限管理

```
相机权限 → 扫描功能
存储权限 → 相册访问 + 图片保存
网络权限 → 词典查询 + 应用更新
```

## 性能优化策略

1. **图片处理**: 使用Glide进行图片缓存和压缩
2. **数据库**: Room数据库异步操作
3. **网络请求**: Retrofit缓存策略
4. **内存管理**: 及时释放相机资源
5. **UI优化**: ViewBinding减少findViewById调用

## 安全考虑

1. **权限最小化**: 只申请必要权限
2. **数据加密**: 敏感数据本地加密存储
3. **网络安全**: HTTPS请求，证书验证
4. **用户隐私**: 不收集个人敏感信息

这个架构设计确保了应用的稳定性、可扩展性和用户体验的优化。





